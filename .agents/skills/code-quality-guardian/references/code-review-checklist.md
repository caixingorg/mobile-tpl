# 代码审查清单

## 生成代码前检查

### 0. CSS 规范检查 ⚠️

- [ ] **项目中无任何内联 CSS**（style 属性）
- [ ] 已确认使用 CSS Modules/Tailwind/其他方案
- [ ] 了解项目 CSS 命名规范

### 1. 项目配置确认

- [ ] 项目已配置 ESLint
- [ ] 项目已配置 Prettier
- [ ] 项目已配置 TypeScript（如适用）
- [ ] 项目有明确的命名规范文档

### 2. 需求理解

- [ ] 明确功能需求
- [ ] 明确接口契约
- [ ] 明确错误处理要求
- [ ] 明确性能要求

## 生成代码时检查

### TypeScript/React

#### 命名规范

- [ ] 组件文件使用 PascalCase (UserProfile.tsx)
- [ ] 工具文件使用 camelCase (formatDate.ts)
- [ ] 常量使用 SCREAMING_SNAKE_CASE
- [ ] 类型/接口使用 PascalCase
- [ ] 函数使用 camelCase + 动词开头
- [ ] 布尔值使用 is/has/should 前缀
- [ ] 事件处理使用 handle 前缀

#### 类型安全

- [ ] 没有使用 `any`（除非必要且有注释）
- [ ] 函数参数有类型注解
- [ ] 函数返回值有类型注解
- [ ] 使用 `unknown` 替代 `any` 进行类型断言

#### CSS 规范（⚠️ 重点）

- [ ] **没有使用 style 属性**（除允许的例外）
- [ ] 使用 CSS Modules/Tailwind/Styled Components
- [ ] 类名符合项目命名规范（BEM/Tailwind）
- [ ] 动态样式使用类名切换，非 style 属性
- [ ] CSS 文件组织正确（组件紧邻样式）

#### 代码结构

- [ ] 导入顺序正确（React → 第三方 → 内部绝对路径 → 相对路径）
- [ ] 单一职责原则（函数只做一件事）
- [ ] 函数长度不超过 50 行
- [ ] 没有超过 3 层的嵌套
- [ ] 使用早期返回替代深层嵌套

#### React 特定

- [ ] Props 有明确的类型定义
- [ ] 组件有返回类型注解 (JSX.Element)
- [ ] Hook 依赖数组正确
- [ ] 事件处理函数有类型注解
- [ ] 使用解构获取 props

#### 安全性

- [ ] 没有 SQL/NoSQL 注入风险
- [ ] 没有 XSS 风险（输出已转义）
- [ ] 没有 eval 或动态代码执行
- [ ] 敏感数据不暴露在日志中

### Node.js/后端

#### API 设计

- [ ] RESTful 命名规范
- [ ] 请求参数有验证
- [ ] 响应格式统一
- [ ] 错误码定义清晰

#### 数据库

- [ ] 使用参数化查询
- [ ] 事务处理正确
- [ ] 没有 N+1 查询问题

#### 错误处理

- [ ] 使用自定义错误类
- [ ] 有全局错误处理中间件
- [ ] 错误日志记录完整
- [ ] 不向客户端暴露敏感错误信息

### Python

#### 命名规范

- [ ] 模块使用 snake_case
- [ ] 类使用 PascalCase
- [ ] 函数/变量使用 snake_case
- [ ] 常量使用 SCREAMING_SNAKE_CASE

#### 类型注解

- [ ] 函数参数有类型注解
- [ ] 函数返回值有类型注解
- [ ] 复杂类型使用 typing 模块

## 生成代码后检查

### 自动化检查

```bash
# 运行以下命令确保全部通过
npm run lint
npm run format:check
npm run type-check
npm run build
```

### 手动检查

- [ ] 代码可以正常编译/运行
- [ ] 没有控制台错误
- [ ] 测试用例通过
- [ ] 代码自解释（不需要过多注释）

### 文档检查

- [ ] 复杂的业务逻辑有注释说明
- [ ] 公共 API 有 JSDoc 注释
- [ ] TODO 有对应的 Issue 链接

## 常见反模式检查

### 命名

- [ ] 没有使用拼音命名
- [ ] 没有使用无意义的缩写
- [ ] 没有使用单一字母（除了简单循环）

### 代码重复

- [ ] 没有复制粘贴的代码块
- [ ] 公共逻辑已提取为函数/工具

### 复杂度

- [ ] 没有超过 10 个参数的方法
- [ ] 没有超过 200 行的类
- [ ] 没有超过 3 层的回调嵌套

### 资源管理

- [ ] 文件流正确关闭
- [ ] 数据库连接正确释放
- [ ] 事件监听正确移除

### CSS 文件

- [ ] 使用类选择器，非 ID/元素选择器
- [ ] 无内联样式（除了允许的例外）
- [ ] 属性按规范排序
- [ ] 无 !important（除非必要且有注释）
- [ ] 使用 CSS 变量管理主题值
- [ ] 响应式断点一致

### JSX 文件

- [ ] 无 style 属性
- [ ] 类名有意义且符合命名规范
- [ ] 复杂的类名逻辑使用 classnames/clsx
- [ ] 动态样式使用 CSS 类切换

## 性能检查

- [ ] 没有循环中的重复计算
- [ ] 大数据集使用分页
- [ ] 异步操作有错误处理
- [ ] 没有内存泄漏风险

## 安全检查

- [ ] 没有硬编码的密钥
- [ ] 没有敏感信息日志
- [ ] 输入数据已验证和清理
- [ ] 权限检查正确

## 提交流程

1. **自我审查** - 对照本清单逐项检查
2. **自动化检查** - 运行验证脚本
3. **本地测试** - 确保功能正常
4. **提交代码** - 遵循 commit message 规范
5. **代码审查** - 请同事审查关键代码

## 审查注释标记

```
// TODO: 需要后续处理的事项
// FIXME: 需要修复的问题
// HACK: 临时解决方案，需要重构
// NOTE: 重要的实现说明
// REVIEW: 需要审查的地方
```
